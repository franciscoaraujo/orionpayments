apiVersion: skaffold/v4beta7
kind: Config
metadata:
  name: orionpay

build:
  artifacts:
    - image: orionpay-authorization-service
      context: ./orionpay-authorization-service
      docker:
        dockerfile: Dockerfile
    - image: service-identity
      context: ./service-identity
      docker:
        dockerfile: Dockerfile
    - image: service-capture
      context: ./service-capture
      docker:
        dockerfile: Dockerfile
    - image: service-settlement
      context: ./service-settlement
      docker:
        dockerfile: Dockerfile
  tagPolicy:
    sha256: {}

manifests:
  rawYaml:
    - k8s-manifests/*.yaml

deploy:
  kubectl: {}

portForward:
  - resourceType: service
    resourceName: orionpay-authorization-service
    namespace: orionpay
    port: 8080
    localPort: 8080
  - resourceType: service
    resourceName: service-identity
    namespace: orionpay
    port: 9090
    localPort: 9090
  - resourceType: service
    resourceName: service-capture
    namespace: orionpay
    port: 8082
    localPort: 8082
  - resourceType: service
    resourceName: service-settlement
    namespace: orionpay
    port: 8083
    localPort: 8083
